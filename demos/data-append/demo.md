# Data Append Demo

This transcript was generated by running the live append workflow against the `hello_world` route. The script resets `runtime/appends`, records every request, captures the resulting files, and restores the original storage afterwards.

## Resetting append storage

**Before reset**

```text
(absent: runtime/appends)
```

**After reset**

```text
(absent: runtime/appends)
```

## Append requests

### Happy path append

Command: `POST /routes/hello_world/append`

**Payload**

```json
{
  "greeting": "Hello, append demo!",
  "note": "Captured by demos/data-append/generate_demo.py",
  "created_at": "2025-11-04T02:54:36.433614+00:00"
}
```

Status: `200`

**Response**

```json
{
  "appended": true,
  "path": "/workspace/webbed_duck/demos/data-append/append-demo-najyland/runtime/appends/hello_appends.csv"
}
```

### Validation failure

Command: `POST /routes/hello_world/append`

**Payload**

```json
[
  {
    "greeting": "Ignored row"
  }
]
```

Status: `400`

**Response**

```json
{
  "detail": {
    "code": "invalid_parameter",
    "message": "Append payload must be an object",
    "hint": "Verify the value is formatted as documented (e.g. integer, boolean).",
    "category": "ValidationError"
  }
}
```

## Filesystem snapshot during run

```text
└── runtime
    └── appends
        └── hello_appends.csv
```

## Appended CSV contents

Command: `cat runtime/appends/hello_appends.csv`

```csv
greeting,note,created_at
"Hello, append demo!",Captured by demos/data-append/generate_demo.py,2025-11-04T02:54:36.433614+00:00
```

