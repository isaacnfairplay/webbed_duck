# Overrides demo

_Generated by `generate_demo.py` on 2025-11-04 02:51:29 UTC._

The automation seeds the `hello_world` route with a named greeting, applies a cell-level override via the HTTP API, captures audit details, and then rolls back the change so repeated runs start from a clean state.

Run `python demos/overrides/generate_demo.py` to refresh the captures and this document.

## Step 1: Render the greeting before overrides

Baseline HTML render of the `hello_world` route before any overrides are applied.

### Raw request
```http
GET /hello?format=html_t&name=Audit+Demo HTTP/1.1
accept: text/html
accept-encoding: gzip, deflate
connection: keep-alive
host: testserver
user-agent: testclient
```

### Raw response
```http
HTTP/1.1 200 OK
content-length: 3947
content-type: text/html; charset=utf-8
link: <http://testserver/hello?name=Audit+Demo&format=arrow_rpc>; rel="data"
vary: Accept
x-limit: 1
x-offset: 0
x-total-rows: 1

<!doctype html><html data-has-top='true'><head><meta charset='utf-8'><link rel='stylesheet' href='/assets/wd/layout.css?v=0.15.0'><link rel='stylesheet' href='/assets/wd/params.css?v=0.15.0'><link rel='stylesheet' href='/assets/wd/multi_select.css?v=0.15.0'><link rel='stylesheet' href='/assets/wd/table.css?v=0.15.0'><link rel='modulepreload' href='/assets/wd/header.js?v=0.15.0'><link rel='modulepreload' href='/assets/wd/params_form.js?v=0.15.0'><link rel='modulepreload' href='/assets/wd/multi_select.js?v=0.15.0'><link rel='modulepreload' href='/assets/wd/table_header.js?v=0.15.0'></head><body data-wd-widgets='header multi_select params'><div class='wd-shell'><header class='wd-top' data-wd-top data-hidden='false' data-collapsed='false'><div class='wd-top-inner'><div class='wd-top-actions'><button type='button' class='wd-top-button wd-top-button--ghost' data-wd-theme-toggle data-dark-label='Use dark theme' data-light-label='Use light theme' data-system-label='System theme ({theme})' data-hint='Click to toggle theme. Alt-click to follow your system preference.' aria-pressed='mixed'>System theme (light)</button><button type='button' class='wd-top-button' data-wd-top-toggle data-hide-label='Hide header' data-show-label='Show header' aria-expanded='true'>Hide header</button><button type='button' class='wd-top-button' data-wd-filters-toggle data-hide-label='Hide filters' data-show-label='Show filters' aria-controls='wd-filters' aria-expanded='true'>Hide filters</button></div><div class='wd-top-sections'><div class='wd-banners'><p class='banner warning'>Development mode – HTTP only</p><p class='banner info'>Errors follow the webbed_duck taxonomy (see docs).</p></div><div class='wd-summary'><p class='result-summary'>Showing 1–1 of 1 rows</p></div><div class='wd-filters' data-wd-filters id='wd-filters'><div class='params-bar'><form method='get' action='?' class='params-form' data-wd-widget='params'><input type='hidden' name='format' value='html_t'/><input type='hidden' name='offset' value='0'/><div class='param-field'><label for='param-name'>Name</label><input type='text' id='param-name' name='name' value='Audit Demo' placeholder='Your teammate'/><p class='param-help'>Type a name and press Apply to refresh the greeting</p></div><div class='param-actions'><button type='submit'>Apply</button><a class='reset-link' href='?'>Reset</a></div></form></div></div></div></div></header><main class='wd-main'><div class='wd-main-inner'><div class='wd-chart-block'><svg viewBox='0 0 400 160' role='img' aria-label='Line chart'><polyline fill='none' stroke='#3b82f6' stroke-width='2' points='12.0,80.0'/></svg></div><div class='wd-surface wd-surface--flush wd-table' data-wd-table><div class='wd-table-mini' data-wd-table-mini hidden><span class='wd-table-mini-label'>greeting</span><span class='wd-table-mini-label'>note</span><span class='wd-table-mini-label'>greeting_length</span><span class='wd-table-mini-label'>created_at</span></div><div class='wd-table-scroller'><table><thead><tr><th>greeting</th><th>note</th><th>greeting_length</th><th>created_at</th></tr></thead><tbody><tr><td>Hello, Audit Demo!</td><td>Personalized greeting rendered by DuckDB</td><td>18</td><td>2025-11-04T02:51:29.877745+00:00</td></tr></tbody></table></div></div><div class='rpc-actions'><a class='rpc-download' href='http://testserver/hello?name=Audit+Demo&amp;format=arrow_rpc'>Download this slice (Arrow)</a></div><script type='application/json' id='wd-rpc-config'>{"format":"arrow_rpc","total_rows":1,"offset":0,"limit":null,"page_rows":1,"endpoint":"http://testserver/hello?name=Audit+Demo&format=arrow_rpc"}</script></div></main></div><script type='module' src='/assets/wd/header.js?v=0.15.0'></script><script type='module' src='/assets/wd/params_form.js?v=0.15.0'></script><script type='module' src='/assets/wd/multi_select.js?v=0.15.0'></script><script type='module' src='/assets/wd/table_header.js?v=0.15.0'></script></body></html>
```

### HTML evidence

Key snippet from the rendered table:
```html
<td>Personalized greeting rendered by DuckDB</td>
```

* **HTML source:** [`html/01_initial_html.html`](./captures/html/01_initial_html.html) — embedded below.

  <details>
  <summary>View full source</summary>

  ```html
<!doctype html><html data-has-top='true'><head><meta charset='utf-8'><link rel='stylesheet' href='/assets/wd/layout.css?v=0.15.0'><link rel='stylesheet' href='/assets/wd/params.css?v=0.15.0'><link rel='stylesheet' href='/assets/wd/multi_select.css?v=0.15.0'><link rel='stylesheet' href='/assets/wd/table.css?v=0.15.0'><link rel='modulepreload' href='/assets/wd/header.js?v=0.15.0'><link rel='modulepreload' href='/assets/wd/params_form.js?v=0.15.0'><link rel='modulepreload' href='/assets/wd/multi_select.js?v=0.15.0'><link rel='modulepreload' href='/assets/wd/table_header.js?v=0.15.0'></head><body data-wd-widgets='header multi_select params'><div class='wd-shell'><header class='wd-top' data-wd-top data-hidden='false' data-collapsed='false'><div class='wd-top-inner'><div class='wd-top-actions'><button type='button' class='wd-top-button wd-top-button--ghost' data-wd-theme-toggle data-dark-label='Use dark theme' data-light-label='Use light theme' data-system-label='System theme ({theme})' data-hint='Click to toggle theme. Alt-click to follow your system preference.' aria-pressed='mixed'>System theme (light)</button><button type='button' class='wd-top-button' data-wd-top-toggle data-hide-label='Hide header' data-show-label='Show header' aria-expanded='true'>Hide header</button><button type='button' class='wd-top-button' data-wd-filters-toggle data-hide-label='Hide filters' data-show-label='Show filters' aria-controls='wd-filters' aria-expanded='true'>Hide filters</button></div><div class='wd-top-sections'><div class='wd-banners'><p class='banner warning'>Development mode – HTTP only</p><p class='banner info'>Errors follow the webbed_duck taxonomy (see docs).</p></div><div class='wd-summary'><p class='result-summary'>Showing 1–1 of 1 rows</p></div><div class='wd-filters' data-wd-filters id='wd-filters'><div class='params-bar'><form method='get' action='?' class='params-form' data-wd-widget='params'><input type='hidden' name='format' value='html_t'/><input type='hidden' name='offset' value='0'/><div class='param-field'><label for='param-name'>Name</label><input type='text' id='param-name' name='name' value='Audit Demo' placeholder='Your teammate'/><p class='param-help'>Type a name and press Apply to refresh the greeting</p></div><div class='param-actions'><button type='submit'>Apply</button><a class='reset-link' href='?'>Reset</a></div></form></div></div></div></div></header><main class='wd-main'><div class='wd-main-inner'><div class='wd-chart-block'><svg viewBox='0 0 400 160' role='img' aria-label='Line chart'><polyline fill='none' stroke='#3b82f6' stroke-width='2' points='12.0,80.0'/></svg></div><div class='wd-surface wd-surface--flush wd-table' data-wd-table><div class='wd-table-mini' data-wd-table-mini hidden><span class='wd-table-mini-label'>greeting</span><span class='wd-table-mini-label'>note</span><span class='wd-table-mini-label'>greeting_length</span><span class='wd-table-mini-label'>created_at</span></div><div class='wd-table-scroller'><table><thead><tr><th>greeting</th><th>note</th><th>greeting_length</th><th>created_at</th></tr></thead><tbody><tr><td>Hello, Audit Demo!</td><td>Personalized greeting rendered by DuckDB</td><td>18</td><td>2025-11-04T02:51:29.877745+00:00</td></tr></tbody></table></div></div><div class='rpc-actions'><a class='rpc-download' href='http://testserver/hello?name=Audit+Demo&amp;format=arrow_rpc'>Download this slice (Arrow)</a></div><script type='application/json' id='wd-rpc-config'>{"format":"arrow_rpc","total_rows":1,"offset":0,"limit":null,"page_rows":1,"endpoint":"http://testserver/hello?name=Audit+Demo&format=arrow_rpc"}</script></div></main></div><script type='module' src='/assets/wd/header.js?v=0.15.0'></script><script type='module' src='/assets/wd/params_form.js?v=0.15.0'></script><script type='module' src='/assets/wd/multi_select.js?v=0.15.0'></script><script type='module' src='/assets/wd/table_header.js?v=0.15.0'></script></body></html>
  ```

  </details>

  <div class="demo-preview" data-source="html/01_initial_html.html">
<div class='wd-shell'><header class='wd-top' data-wd-top data-hidden='false' data-collapsed='false'><div class='wd-top-inner'><div class='wd-top-actions'><button type='button' class='wd-top-button wd-top-button--ghost' data-wd-theme-toggle data-dark-label='Use dark theme' data-light-label='Use light theme' data-system-label='System theme ({theme})' data-hint='Click to toggle theme. Alt-click to follow your system preference.' aria-pressed='mixed'>System theme (light)</button><button type='button' class='wd-top-button' data-wd-top-toggle data-hide-label='Hide header' data-show-label='Show header' aria-expanded='true'>Hide header</button><button type='button' class='wd-top-button' data-wd-filters-toggle data-hide-label='Hide filters' data-show-label='Show filters' aria-controls='wd-filters' aria-expanded='true'>Hide filters</button></div><div class='wd-top-sections'><div class='wd-banners'><p class='banner warning'>Development mode – HTTP only</p><p class='banner info'>Errors follow the webbed_duck taxonomy (see docs).</p></div><div class='wd-summary'><p class='result-summary'>Showing 1–1 of 1 rows</p></div><div class='wd-filters' data-wd-filters id='wd-filters'><div class='params-bar'><form method='get' action='?' class='params-form' data-wd-widget='params'><input type='hidden' name='format' value='html_t'/><input type='hidden' name='offset' value='0'/><div class='param-field'><label for='param-name'>Name</label><input type='text' id='param-name' name='name' value='Audit Demo' placeholder='Your teammate'/><p class='param-help'>Type a name and press Apply to refresh the greeting</p></div><div class='param-actions'><button type='submit'>Apply</button><a class='reset-link' href='?'>Reset</a></div></form></div></div></div></div></header><main class='wd-main'><div class='wd-main-inner'><div class='wd-chart-block'><svg viewBox='0 0 400 160' role='img' aria-label='Line chart'><polyline fill='none' stroke='#3b82f6' stroke-width='2' points='12.0,80.0'/></svg></div><div class='wd-surface wd-surface--flush wd-table' data-wd-table><div class='wd-table-mini' data-wd-table-mini hidden><span class='wd-table-mini-label'>greeting</span><span class='wd-table-mini-label'>note</span><span class='wd-table-mini-label'>greeting_length</span><span class='wd-table-mini-label'>created_at</span></div><div class='wd-table-scroller'><table><thead><tr><th>greeting</th><th>note</th><th>greeting_length</th><th>created_at</th></tr></thead><tbody><tr><td>Hello, Audit Demo!</td><td>Personalized greeting rendered by DuckDB</td><td>18</td><td>2025-11-04T02:51:29.877745+00:00</td></tr></tbody></table></div></div><div class='rpc-actions'><a class='rpc-download' href='http://testserver/hello?name=Audit+Demo&amp;format=arrow_rpc'>Download this slice (Arrow)</a></div><script type='application/json' id='wd-rpc-config'>{"format":"arrow_rpc","total_rows":1,"offset":0,"limit":null,"page_rows":1,"endpoint":"http://testserver/hello?name=Audit+Demo&format=arrow_rpc"}</script></div></main></div><script type='module' src='/assets/wd/header.js?v=0.15.0'></script><script type='module' src='/assets/wd/params_form.js?v=0.15.0'></script><script type='module' src='/assets/wd/multi_select.js?v=0.15.0'></script><script type='module' src='/assets/wd/table_header.js?v=0.15.0'></script>
  </div>

Artifacts: [`http/01_initial_html_request.http`](./captures/http/01_initial_html_request.http), [`http/01_initial_html_response.http`](./captures/http/01_initial_html_response.http), [`html/01_initial_html.html`](./captures/html/01_initial_html.html)

## Step 2: Submit an override for the note column

POST the override payload documenting the new note and author metadata.

### Raw request
```http
POST /routes/hello_world/overrides HTTP/1.1
accept: */*
accept-encoding: gzip, deflate
connection: keep-alive
content-length: 203
content-type: application/json
host: testserver
user-agent: testclient

{"column":"note","row_key":"{\"greeting\": \"Hello, Audit Demo!\"}","value":"Override note captured by generate_demo.py","reason":"Documenting manual note update","author":"demo.generator@company.local"}
```

### Raw response
```http
HTTP/1.1 200 OK
content-length: 342
content-type: application/json

{"override":{"route_id":"hello_world","row_key":"{\"greeting\": \"Hello, Audit Demo!\"}","column":"note","value":"Override note captured by generate_demo.py","reason":"Documenting manual note update","author_hash":"4c328170073b990ae3d2139a21dc3191035081ff08f4132d4abe01c72f5c2fef","author_user_id":"anonymous","created_ts":1762224689.928201}}
```

### JSON payload
```json
{
  "override": {
    "author_hash": "4c328170073b990ae3d2139a21dc3191035081ff08f4132d4abe01c72f5c2fef",
    "author_user_id": "anonymous",
    "column": "note",
    "created_ts": 1762224689.928201,
    "reason": "Documenting manual note update",
    "route_id": "hello_world",
    "row_key": "{\"greeting\": \"Hello, Audit Demo!\"}",
    "value": "Override note captured by generate_demo.py"
  }
}
```

Artifacts: [`http/02_create_override_request.http`](./captures/http/02_create_override_request.http), [`http/02_create_override_response.http`](./captures/http/02_create_override_response.http)

## Step 3: Inspect the override audit trail

Retrieve the overlay store entries after creating the override to surface the recorded author and reason.

### Raw request
```http
GET /routes/hello_world/overrides HTTP/1.1
accept: */*
accept-encoding: gzip, deflate
connection: keep-alive
host: testserver
user-agent: testclient
```

### Raw response
```http
HTTP/1.1 200 OK
content-length: 370
content-type: application/json

{"route_id":"hello_world","overrides":[{"route_id":"hello_world","row_key":"{\"greeting\": \"Hello, Audit Demo!\"}","column":"note","value":"Override note captured by generate_demo.py","reason":"Documenting manual note update","author_hash":"4c328170073b990ae3d2139a21dc3191035081ff08f4132d4abe01c72f5c2fef","author_user_id":"anonymous","created_ts":1762224689.928201}]}
```

### JSON payload
```json
{
  "overrides": [
    {
      "author_hash": "4c328170073b990ae3d2139a21dc3191035081ff08f4132d4abe01c72f5c2fef",
      "author_user_id": "anonymous",
      "column": "note",
      "created_ts": 1762224689.928201,
      "reason": "Documenting manual note update",
      "route_id": "hello_world",
      "row_key": "{\"greeting\": \"Hello, Audit Demo!\"}",
      "value": "Override note captured by generate_demo.py"
    }
  ],
  "route_id": "hello_world"
}
```

Artifacts: [`http/03_audit_after_create_request.http`](./captures/http/03_audit_after_create_request.http), [`http/03_audit_after_create_response.http`](./captures/http/03_audit_after_create_response.http)

## Step 4: Render HTML with the override applied

Confirm the rendered table shows the overridden note value.

### Raw request
```http
GET /hello?format=html_t&name=Audit+Demo HTTP/1.1
accept: text/html
accept-encoding: gzip, deflate
connection: keep-alive
host: testserver
user-agent: testclient
```

### Raw response
```http
HTTP/1.1 200 OK
content-length: 3949
content-type: text/html; charset=utf-8
link: <http://testserver/hello?name=Audit+Demo&format=arrow_rpc>; rel="data"
vary: Accept
x-limit: 1
x-offset: 0
x-total-rows: 1

<!doctype html><html data-has-top='true'><head><meta charset='utf-8'><link rel='stylesheet' href='/assets/wd/layout.css?v=0.15.0'><link rel='stylesheet' href='/assets/wd/params.css?v=0.15.0'><link rel='stylesheet' href='/assets/wd/multi_select.css?v=0.15.0'><link rel='stylesheet' href='/assets/wd/table.css?v=0.15.0'><link rel='modulepreload' href='/assets/wd/header.js?v=0.15.0'><link rel='modulepreload' href='/assets/wd/params_form.js?v=0.15.0'><link rel='modulepreload' href='/assets/wd/multi_select.js?v=0.15.0'><link rel='modulepreload' href='/assets/wd/table_header.js?v=0.15.0'></head><body data-wd-widgets='header multi_select params'><div class='wd-shell'><header class='wd-top' data-wd-top data-hidden='false' data-collapsed='false'><div class='wd-top-inner'><div class='wd-top-actions'><button type='button' class='wd-top-button wd-top-button--ghost' data-wd-theme-toggle data-dark-label='Use dark theme' data-light-label='Use light theme' data-system-label='System theme ({theme})' data-hint='Click to toggle theme. Alt-click to follow your system preference.' aria-pressed='mixed'>System theme (light)</button><button type='button' class='wd-top-button' data-wd-top-toggle data-hide-label='Hide header' data-show-label='Show header' aria-expanded='true'>Hide header</button><button type='button' class='wd-top-button' data-wd-filters-toggle data-hide-label='Hide filters' data-show-label='Show filters' aria-controls='wd-filters' aria-expanded='true'>Hide filters</button></div><div class='wd-top-sections'><div class='wd-banners'><p class='banner warning'>Development mode – HTTP only</p><p class='banner info'>Errors follow the webbed_duck taxonomy (see docs).</p></div><div class='wd-summary'><p class='result-summary'>Showing 1–1 of 1 rows</p></div><div class='wd-filters' data-wd-filters id='wd-filters'><div class='params-bar'><form method='get' action='?' class='params-form' data-wd-widget='params'><input type='hidden' name='format' value='html_t'/><input type='hidden' name='offset' value='0'/><div class='param-field'><label for='param-name'>Name</label><input type='text' id='param-name' name='name' value='Audit Demo' placeholder='Your teammate'/><p class='param-help'>Type a name and press Apply to refresh the greeting</p></div><div class='param-actions'><button type='submit'>Apply</button><a class='reset-link' href='?'>Reset</a></div></form></div></div></div></div></header><main class='wd-main'><div class='wd-main-inner'><div class='wd-chart-block'><svg viewBox='0 0 400 160' role='img' aria-label='Line chart'><polyline fill='none' stroke='#3b82f6' stroke-width='2' points='12.0,80.0'/></svg></div><div class='wd-surface wd-surface--flush wd-table' data-wd-table><div class='wd-table-mini' data-wd-table-mini hidden><span class='wd-table-mini-label'>greeting</span><span class='wd-table-mini-label'>note</span><span class='wd-table-mini-label'>greeting_length</span><span class='wd-table-mini-label'>created_at</span></div><div class='wd-table-scroller'><table><thead><tr><th>greeting</th><th>note</th><th>greeting_length</th><th>created_at</th></tr></thead><tbody><tr><td>Hello, Audit Demo!</td><td>Override note captured by generate_demo.py</td><td>18</td><td>2025-11-04T02:51:29.877745+00:00</td></tr></tbody></table></div></div><div class='rpc-actions'><a class='rpc-download' href='http://testserver/hello?name=Audit+Demo&amp;format=arrow_rpc'>Download this slice (Arrow)</a></div><script type='application/json' id='wd-rpc-config'>{"format":"arrow_rpc","total_rows":1,"offset":0,"limit":null,"page_rows":1,"endpoint":"http://testserver/hello?name=Audit+Demo&format=arrow_rpc"}</script></div></main></div><script type='module' src='/assets/wd/header.js?v=0.15.0'></script><script type='module' src='/assets/wd/params_form.js?v=0.15.0'></script><script type='module' src='/assets/wd/multi_select.js?v=0.15.0'></script><script type='module' src='/assets/wd/table_header.js?v=0.15.0'></script></body></html>
```

### HTML evidence

Key snippet from the rendered table:
```html
<td>Override note captured by generate_demo.py</td>
```

* **HTML source:** [`html/04_html_after_override.html`](./captures/html/04_html_after_override.html) — embedded below.

  <details>
  <summary>View full source</summary>

  ```html
<!doctype html><html data-has-top='true'><head><meta charset='utf-8'><link rel='stylesheet' href='/assets/wd/layout.css?v=0.15.0'><link rel='stylesheet' href='/assets/wd/params.css?v=0.15.0'><link rel='stylesheet' href='/assets/wd/multi_select.css?v=0.15.0'><link rel='stylesheet' href='/assets/wd/table.css?v=0.15.0'><link rel='modulepreload' href='/assets/wd/header.js?v=0.15.0'><link rel='modulepreload' href='/assets/wd/params_form.js?v=0.15.0'><link rel='modulepreload' href='/assets/wd/multi_select.js?v=0.15.0'><link rel='modulepreload' href='/assets/wd/table_header.js?v=0.15.0'></head><body data-wd-widgets='header multi_select params'><div class='wd-shell'><header class='wd-top' data-wd-top data-hidden='false' data-collapsed='false'><div class='wd-top-inner'><div class='wd-top-actions'><button type='button' class='wd-top-button wd-top-button--ghost' data-wd-theme-toggle data-dark-label='Use dark theme' data-light-label='Use light theme' data-system-label='System theme ({theme})' data-hint='Click to toggle theme. Alt-click to follow your system preference.' aria-pressed='mixed'>System theme (light)</button><button type='button' class='wd-top-button' data-wd-top-toggle data-hide-label='Hide header' data-show-label='Show header' aria-expanded='true'>Hide header</button><button type='button' class='wd-top-button' data-wd-filters-toggle data-hide-label='Hide filters' data-show-label='Show filters' aria-controls='wd-filters' aria-expanded='true'>Hide filters</button></div><div class='wd-top-sections'><div class='wd-banners'><p class='banner warning'>Development mode – HTTP only</p><p class='banner info'>Errors follow the webbed_duck taxonomy (see docs).</p></div><div class='wd-summary'><p class='result-summary'>Showing 1–1 of 1 rows</p></div><div class='wd-filters' data-wd-filters id='wd-filters'><div class='params-bar'><form method='get' action='?' class='params-form' data-wd-widget='params'><input type='hidden' name='format' value='html_t'/><input type='hidden' name='offset' value='0'/><div class='param-field'><label for='param-name'>Name</label><input type='text' id='param-name' name='name' value='Audit Demo' placeholder='Your teammate'/><p class='param-help'>Type a name and press Apply to refresh the greeting</p></div><div class='param-actions'><button type='submit'>Apply</button><a class='reset-link' href='?'>Reset</a></div></form></div></div></div></div></header><main class='wd-main'><div class='wd-main-inner'><div class='wd-chart-block'><svg viewBox='0 0 400 160' role='img' aria-label='Line chart'><polyline fill='none' stroke='#3b82f6' stroke-width='2' points='12.0,80.0'/></svg></div><div class='wd-surface wd-surface--flush wd-table' data-wd-table><div class='wd-table-mini' data-wd-table-mini hidden><span class='wd-table-mini-label'>greeting</span><span class='wd-table-mini-label'>note</span><span class='wd-table-mini-label'>greeting_length</span><span class='wd-table-mini-label'>created_at</span></div><div class='wd-table-scroller'><table><thead><tr><th>greeting</th><th>note</th><th>greeting_length</th><th>created_at</th></tr></thead><tbody><tr><td>Hello, Audit Demo!</td><td>Override note captured by generate_demo.py</td><td>18</td><td>2025-11-04T02:51:29.877745+00:00</td></tr></tbody></table></div></div><div class='rpc-actions'><a class='rpc-download' href='http://testserver/hello?name=Audit+Demo&amp;format=arrow_rpc'>Download this slice (Arrow)</a></div><script type='application/json' id='wd-rpc-config'>{"format":"arrow_rpc","total_rows":1,"offset":0,"limit":null,"page_rows":1,"endpoint":"http://testserver/hello?name=Audit+Demo&format=arrow_rpc"}</script></div></main></div><script type='module' src='/assets/wd/header.js?v=0.15.0'></script><script type='module' src='/assets/wd/params_form.js?v=0.15.0'></script><script type='module' src='/assets/wd/multi_select.js?v=0.15.0'></script><script type='module' src='/assets/wd/table_header.js?v=0.15.0'></script></body></html>
  ```

  </details>

  <div class="demo-preview" data-source="html/04_html_after_override.html">
<div class='wd-shell'><header class='wd-top' data-wd-top data-hidden='false' data-collapsed='false'><div class='wd-top-inner'><div class='wd-top-actions'><button type='button' class='wd-top-button wd-top-button--ghost' data-wd-theme-toggle data-dark-label='Use dark theme' data-light-label='Use light theme' data-system-label='System theme ({theme})' data-hint='Click to toggle theme. Alt-click to follow your system preference.' aria-pressed='mixed'>System theme (light)</button><button type='button' class='wd-top-button' data-wd-top-toggle data-hide-label='Hide header' data-show-label='Show header' aria-expanded='true'>Hide header</button><button type='button' class='wd-top-button' data-wd-filters-toggle data-hide-label='Hide filters' data-show-label='Show filters' aria-controls='wd-filters' aria-expanded='true'>Hide filters</button></div><div class='wd-top-sections'><div class='wd-banners'><p class='banner warning'>Development mode – HTTP only</p><p class='banner info'>Errors follow the webbed_duck taxonomy (see docs).</p></div><div class='wd-summary'><p class='result-summary'>Showing 1–1 of 1 rows</p></div><div class='wd-filters' data-wd-filters id='wd-filters'><div class='params-bar'><form method='get' action='?' class='params-form' data-wd-widget='params'><input type='hidden' name='format' value='html_t'/><input type='hidden' name='offset' value='0'/><div class='param-field'><label for='param-name'>Name</label><input type='text' id='param-name' name='name' value='Audit Demo' placeholder='Your teammate'/><p class='param-help'>Type a name and press Apply to refresh the greeting</p></div><div class='param-actions'><button type='submit'>Apply</button><a class='reset-link' href='?'>Reset</a></div></form></div></div></div></div></header><main class='wd-main'><div class='wd-main-inner'><div class='wd-chart-block'><svg viewBox='0 0 400 160' role='img' aria-label='Line chart'><polyline fill='none' stroke='#3b82f6' stroke-width='2' points='12.0,80.0'/></svg></div><div class='wd-surface wd-surface--flush wd-table' data-wd-table><div class='wd-table-mini' data-wd-table-mini hidden><span class='wd-table-mini-label'>greeting</span><span class='wd-table-mini-label'>note</span><span class='wd-table-mini-label'>greeting_length</span><span class='wd-table-mini-label'>created_at</span></div><div class='wd-table-scroller'><table><thead><tr><th>greeting</th><th>note</th><th>greeting_length</th><th>created_at</th></tr></thead><tbody><tr><td>Hello, Audit Demo!</td><td>Override note captured by generate_demo.py</td><td>18</td><td>2025-11-04T02:51:29.877745+00:00</td></tr></tbody></table></div></div><div class='rpc-actions'><a class='rpc-download' href='http://testserver/hello?name=Audit+Demo&amp;format=arrow_rpc'>Download this slice (Arrow)</a></div><script type='application/json' id='wd-rpc-config'>{"format":"arrow_rpc","total_rows":1,"offset":0,"limit":null,"page_rows":1,"endpoint":"http://testserver/hello?name=Audit+Demo&format=arrow_rpc"}</script></div></main></div><script type='module' src='/assets/wd/header.js?v=0.15.0'></script><script type='module' src='/assets/wd/params_form.js?v=0.15.0'></script><script type='module' src='/assets/wd/multi_select.js?v=0.15.0'></script><script type='module' src='/assets/wd/table_header.js?v=0.15.0'></script>
  </div>

Artifacts: [`http/04_html_after_override_request.http`](./captures/http/04_html_after_override_request.http), [`http/04_html_after_override_response.http`](./captures/http/04_html_after_override_response.http), [`html/04_html_after_override.html`](./captures/html/04_html_after_override.html)

## Step 5: Verify overrides are cleared

Confirm the overlay store no longer contains entries for the route after teardown.

### Raw request
```http
GET /routes/hello_world/overrides HTTP/1.1
accept: */*
accept-encoding: gzip, deflate
connection: keep-alive
host: testserver
user-agent: testclient
```

### Raw response
```http
HTTP/1.1 200 OK
content-length: 41
content-type: application/json

{"route_id":"hello_world","overrides":[]}
```

### JSON payload
```json
{
  "overrides": [],
  "route_id": "hello_world"
}
```

Artifacts: [`http/05_audit_after_teardown_request.http`](./captures/http/05_audit_after_teardown_request.http), [`http/05_audit_after_teardown_response.http`](./captures/http/05_audit_after_teardown_response.http)

## Step 6: Render HTML after cleanup

Final render showing the note has reverted to the base DuckDB value once the override is removed.

### Raw request
```http
GET /hello?format=html_t&name=Audit+Demo HTTP/1.1
accept: text/html
accept-encoding: gzip, deflate
connection: keep-alive
host: testserver
user-agent: testclient
```

### Raw response
```http
HTTP/1.1 200 OK
content-length: 3947
content-type: text/html; charset=utf-8
link: <http://testserver/hello?name=Audit+Demo&format=arrow_rpc>; rel="data"
vary: Accept
x-limit: 1
x-offset: 0
x-total-rows: 1

<!doctype html><html data-has-top='true'><head><meta charset='utf-8'><link rel='stylesheet' href='/assets/wd/layout.css?v=0.15.0'><link rel='stylesheet' href='/assets/wd/params.css?v=0.15.0'><link rel='stylesheet' href='/assets/wd/multi_select.css?v=0.15.0'><link rel='stylesheet' href='/assets/wd/table.css?v=0.15.0'><link rel='modulepreload' href='/assets/wd/header.js?v=0.15.0'><link rel='modulepreload' href='/assets/wd/params_form.js?v=0.15.0'><link rel='modulepreload' href='/assets/wd/multi_select.js?v=0.15.0'><link rel='modulepreload' href='/assets/wd/table_header.js?v=0.15.0'></head><body data-wd-widgets='header multi_select params'><div class='wd-shell'><header class='wd-top' data-wd-top data-hidden='false' data-collapsed='false'><div class='wd-top-inner'><div class='wd-top-actions'><button type='button' class='wd-top-button wd-top-button--ghost' data-wd-theme-toggle data-dark-label='Use dark theme' data-light-label='Use light theme' data-system-label='System theme ({theme})' data-hint='Click to toggle theme. Alt-click to follow your system preference.' aria-pressed='mixed'>System theme (light)</button><button type='button' class='wd-top-button' data-wd-top-toggle data-hide-label='Hide header' data-show-label='Show header' aria-expanded='true'>Hide header</button><button type='button' class='wd-top-button' data-wd-filters-toggle data-hide-label='Hide filters' data-show-label='Show filters' aria-controls='wd-filters' aria-expanded='true'>Hide filters</button></div><div class='wd-top-sections'><div class='wd-banners'><p class='banner warning'>Development mode – HTTP only</p><p class='banner info'>Errors follow the webbed_duck taxonomy (see docs).</p></div><div class='wd-summary'><p class='result-summary'>Showing 1–1 of 1 rows</p></div><div class='wd-filters' data-wd-filters id='wd-filters'><div class='params-bar'><form method='get' action='?' class='params-form' data-wd-widget='params'><input type='hidden' name='format' value='html_t'/><input type='hidden' name='offset' value='0'/><div class='param-field'><label for='param-name'>Name</label><input type='text' id='param-name' name='name' value='Audit Demo' placeholder='Your teammate'/><p class='param-help'>Type a name and press Apply to refresh the greeting</p></div><div class='param-actions'><button type='submit'>Apply</button><a class='reset-link' href='?'>Reset</a></div></form></div></div></div></div></header><main class='wd-main'><div class='wd-main-inner'><div class='wd-chart-block'><svg viewBox='0 0 400 160' role='img' aria-label='Line chart'><polyline fill='none' stroke='#3b82f6' stroke-width='2' points='12.0,80.0'/></svg></div><div class='wd-surface wd-surface--flush wd-table' data-wd-table><div class='wd-table-mini' data-wd-table-mini hidden><span class='wd-table-mini-label'>greeting</span><span class='wd-table-mini-label'>note</span><span class='wd-table-mini-label'>greeting_length</span><span class='wd-table-mini-label'>created_at</span></div><div class='wd-table-scroller'><table><thead><tr><th>greeting</th><th>note</th><th>greeting_length</th><th>created_at</th></tr></thead><tbody><tr><td>Hello, Audit Demo!</td><td>Personalized greeting rendered by DuckDB</td><td>18</td><td>2025-11-04T02:51:29.877745+00:00</td></tr></tbody></table></div></div><div class='rpc-actions'><a class='rpc-download' href='http://testserver/hello?name=Audit+Demo&amp;format=arrow_rpc'>Download this slice (Arrow)</a></div><script type='application/json' id='wd-rpc-config'>{"format":"arrow_rpc","total_rows":1,"offset":0,"limit":null,"page_rows":1,"endpoint":"http://testserver/hello?name=Audit+Demo&format=arrow_rpc"}</script></div></main></div><script type='module' src='/assets/wd/header.js?v=0.15.0'></script><script type='module' src='/assets/wd/params_form.js?v=0.15.0'></script><script type='module' src='/assets/wd/multi_select.js?v=0.15.0'></script><script type='module' src='/assets/wd/table_header.js?v=0.15.0'></script></body></html>
```

### HTML evidence

Key snippet from the rendered table:
```html
<td>Personalized greeting rendered by DuckDB</td>
```

* **HTML source:** [`html/06_html_post_teardown.html`](./captures/html/06_html_post_teardown.html) — embedded below.

  <details>
  <summary>View full source</summary>

  ```html
<!doctype html><html data-has-top='true'><head><meta charset='utf-8'><link rel='stylesheet' href='/assets/wd/layout.css?v=0.15.0'><link rel='stylesheet' href='/assets/wd/params.css?v=0.15.0'><link rel='stylesheet' href='/assets/wd/multi_select.css?v=0.15.0'><link rel='stylesheet' href='/assets/wd/table.css?v=0.15.0'><link rel='modulepreload' href='/assets/wd/header.js?v=0.15.0'><link rel='modulepreload' href='/assets/wd/params_form.js?v=0.15.0'><link rel='modulepreload' href='/assets/wd/multi_select.js?v=0.15.0'><link rel='modulepreload' href='/assets/wd/table_header.js?v=0.15.0'></head><body data-wd-widgets='header multi_select params'><div class='wd-shell'><header class='wd-top' data-wd-top data-hidden='false' data-collapsed='false'><div class='wd-top-inner'><div class='wd-top-actions'><button type='button' class='wd-top-button wd-top-button--ghost' data-wd-theme-toggle data-dark-label='Use dark theme' data-light-label='Use light theme' data-system-label='System theme ({theme})' data-hint='Click to toggle theme. Alt-click to follow your system preference.' aria-pressed='mixed'>System theme (light)</button><button type='button' class='wd-top-button' data-wd-top-toggle data-hide-label='Hide header' data-show-label='Show header' aria-expanded='true'>Hide header</button><button type='button' class='wd-top-button' data-wd-filters-toggle data-hide-label='Hide filters' data-show-label='Show filters' aria-controls='wd-filters' aria-expanded='true'>Hide filters</button></div><div class='wd-top-sections'><div class='wd-banners'><p class='banner warning'>Development mode – HTTP only</p><p class='banner info'>Errors follow the webbed_duck taxonomy (see docs).</p></div><div class='wd-summary'><p class='result-summary'>Showing 1–1 of 1 rows</p></div><div class='wd-filters' data-wd-filters id='wd-filters'><div class='params-bar'><form method='get' action='?' class='params-form' data-wd-widget='params'><input type='hidden' name='format' value='html_t'/><input type='hidden' name='offset' value='0'/><div class='param-field'><label for='param-name'>Name</label><input type='text' id='param-name' name='name' value='Audit Demo' placeholder='Your teammate'/><p class='param-help'>Type a name and press Apply to refresh the greeting</p></div><div class='param-actions'><button type='submit'>Apply</button><a class='reset-link' href='?'>Reset</a></div></form></div></div></div></div></header><main class='wd-main'><div class='wd-main-inner'><div class='wd-chart-block'><svg viewBox='0 0 400 160' role='img' aria-label='Line chart'><polyline fill='none' stroke='#3b82f6' stroke-width='2' points='12.0,80.0'/></svg></div><div class='wd-surface wd-surface--flush wd-table' data-wd-table><div class='wd-table-mini' data-wd-table-mini hidden><span class='wd-table-mini-label'>greeting</span><span class='wd-table-mini-label'>note</span><span class='wd-table-mini-label'>greeting_length</span><span class='wd-table-mini-label'>created_at</span></div><div class='wd-table-scroller'><table><thead><tr><th>greeting</th><th>note</th><th>greeting_length</th><th>created_at</th></tr></thead><tbody><tr><td>Hello, Audit Demo!</td><td>Personalized greeting rendered by DuckDB</td><td>18</td><td>2025-11-04T02:51:29.877745+00:00</td></tr></tbody></table></div></div><div class='rpc-actions'><a class='rpc-download' href='http://testserver/hello?name=Audit+Demo&amp;format=arrow_rpc'>Download this slice (Arrow)</a></div><script type='application/json' id='wd-rpc-config'>{"format":"arrow_rpc","total_rows":1,"offset":0,"limit":null,"page_rows":1,"endpoint":"http://testserver/hello?name=Audit+Demo&format=arrow_rpc"}</script></div></main></div><script type='module' src='/assets/wd/header.js?v=0.15.0'></script><script type='module' src='/assets/wd/params_form.js?v=0.15.0'></script><script type='module' src='/assets/wd/multi_select.js?v=0.15.0'></script><script type='module' src='/assets/wd/table_header.js?v=0.15.0'></script></body></html>
  ```

  </details>

  <div class="demo-preview" data-source="html/06_html_post_teardown.html">
<div class='wd-shell'><header class='wd-top' data-wd-top data-hidden='false' data-collapsed='false'><div class='wd-top-inner'><div class='wd-top-actions'><button type='button' class='wd-top-button wd-top-button--ghost' data-wd-theme-toggle data-dark-label='Use dark theme' data-light-label='Use light theme' data-system-label='System theme ({theme})' data-hint='Click to toggle theme. Alt-click to follow your system preference.' aria-pressed='mixed'>System theme (light)</button><button type='button' class='wd-top-button' data-wd-top-toggle data-hide-label='Hide header' data-show-label='Show header' aria-expanded='true'>Hide header</button><button type='button' class='wd-top-button' data-wd-filters-toggle data-hide-label='Hide filters' data-show-label='Show filters' aria-controls='wd-filters' aria-expanded='true'>Hide filters</button></div><div class='wd-top-sections'><div class='wd-banners'><p class='banner warning'>Development mode – HTTP only</p><p class='banner info'>Errors follow the webbed_duck taxonomy (see docs).</p></div><div class='wd-summary'><p class='result-summary'>Showing 1–1 of 1 rows</p></div><div class='wd-filters' data-wd-filters id='wd-filters'><div class='params-bar'><form method='get' action='?' class='params-form' data-wd-widget='params'><input type='hidden' name='format' value='html_t'/><input type='hidden' name='offset' value='0'/><div class='param-field'><label for='param-name'>Name</label><input type='text' id='param-name' name='name' value='Audit Demo' placeholder='Your teammate'/><p class='param-help'>Type a name and press Apply to refresh the greeting</p></div><div class='param-actions'><button type='submit'>Apply</button><a class='reset-link' href='?'>Reset</a></div></form></div></div></div></div></header><main class='wd-main'><div class='wd-main-inner'><div class='wd-chart-block'><svg viewBox='0 0 400 160' role='img' aria-label='Line chart'><polyline fill='none' stroke='#3b82f6' stroke-width='2' points='12.0,80.0'/></svg></div><div class='wd-surface wd-surface--flush wd-table' data-wd-table><div class='wd-table-mini' data-wd-table-mini hidden><span class='wd-table-mini-label'>greeting</span><span class='wd-table-mini-label'>note</span><span class='wd-table-mini-label'>greeting_length</span><span class='wd-table-mini-label'>created_at</span></div><div class='wd-table-scroller'><table><thead><tr><th>greeting</th><th>note</th><th>greeting_length</th><th>created_at</th></tr></thead><tbody><tr><td>Hello, Audit Demo!</td><td>Personalized greeting rendered by DuckDB</td><td>18</td><td>2025-11-04T02:51:29.877745+00:00</td></tr></tbody></table></div></div><div class='rpc-actions'><a class='rpc-download' href='http://testserver/hello?name=Audit+Demo&amp;format=arrow_rpc'>Download this slice (Arrow)</a></div><script type='application/json' id='wd-rpc-config'>{"format":"arrow_rpc","total_rows":1,"offset":0,"limit":null,"page_rows":1,"endpoint":"http://testserver/hello?name=Audit+Demo&format=arrow_rpc"}</script></div></main></div><script type='module' src='/assets/wd/header.js?v=0.15.0'></script><script type='module' src='/assets/wd/params_form.js?v=0.15.0'></script><script type='module' src='/assets/wd/multi_select.js?v=0.15.0'></script><script type='module' src='/assets/wd/table_header.js?v=0.15.0'></script>
  </div>

Artifacts: [`http/06_html_post_teardown_request.http`](./captures/http/06_html_post_teardown_request.http), [`http/06_html_post_teardown_response.http`](./captures/http/06_html_post_teardown_response.http), [`html/06_html_post_teardown.html`](./captures/html/06_html_post_teardown.html)

## Teardown

Overrides created during the run are removed to keep subsequent executions clean.

```json
{
  "column": "note",
  "removed": true,
  "route_id": "hello_world",
  "row_key": "{\"greeting\": \"Hello, Audit Demo!\"}",
  "timestamp": "2025-11-04T02:51:29.939450Z"
}
```

The final override audit (see the last step above) verifies the store is empty.
